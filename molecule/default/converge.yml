- hosts: all
  become: yes

  vars:
    distros:
      # Fish 2
      - Debian8
      - Debian9
      - RedHat6
      - RedHat7
      - Fedora25
      - Fedora26
      - Fedora27
      - Ubuntu16

  tasks:
    - debug:
        msg: >-
          Testing with Ansible {{ ansible_version.full }} using Python {{ ansible_facts.python_version }}
          on {{ ansible_facts.distribution }} {{ ansible_facts.distribution_version }}

    - include_role:
        name: fish
      when: ansible_facts.distribution ~ ansible_facts.distribution_major_version in distros
